const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CXnrwHG6-1769119750716.js","assets/index-CiRwLPeh-1769119750716.js","assets/charts-C6jPuoY4-1769119750716.js","assets/vendor-COd4auuD-1769119750716.js","assets/firebase-Dp89RMPZ-1769119750716.js","assets/index-CKY0K6o4-1769119750716.css"])))=>i.map(i=>d[i]);
import{j as e,r as N,_ as E}from"./index-CiRwLPeh-1769119750716.js";import{r as l}from"./charts-C6jPuoY4-1769119750716.js";const k=({orderId:t,currentUserId:r,currentUserName:u,otherUserId:f,otherUserName:b,messages:p,sendMessage:w,isOpen:g,onClose:v})=>{const[a,d]=l.useState(""),c=l.useRef(null),i=p.filter(s=>s.orderId===t);l.useEffect(()=>{var s;(s=c.current)==null||s.scrollIntoView({behavior:"smooth"})},[i.length]);const x=()=>{a.trim()&&(w(r,f,t,a.trim()),d(""))},j=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),x())};return g?e.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-[9999] bg-surface-dark border-t border-white/10 rounded-t-2xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/30 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"chat"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-white",children:["Chat with ",b]}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:["Order #",t.slice(-6)]})]})]}),e.jsx("button",{onClick:()=>{console.log("ðŸ“¬ OrderChat: Closing chat..."),v()},className:"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors hover:bg-white/5 rounded-full",children:e.jsx("span",{className:"material-symbols-outlined",children:"keyboard_arrow_down"})})]}),e.jsxs("div",{className:"h-48 overflow-y-auto p-4 space-y-3 bg-black/20",children:[i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-600 mb-2",children:"forum"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No messages yet"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Send a message to start the conversation"})]}):i.map((s,y)=>{const n=s.senderId===r;return e.jsx("div",{className:`flex ${n?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] px-3 py-2 rounded-2xl ${n?"bg-primary text-white rounded-br-sm":"bg-white/10 text-white rounded-bl-sm"}`,children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsx("p",{className:`text-[10px] mt-1 ${n?"text-white/60":"text-slate-500"}`,children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},y)}),e.jsx("div",{ref:c})]}),e.jsx("div",{className:"p-3 bg-black/30 border-t border-white/5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:s=>d(s.target.value),onKeyPress:j,placeholder:"Type a message...",className:"flex-1 bg-white/5 border border-white/10 rounded-full px-4 py-2.5 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:border-primary/50"}),e.jsx("button",{onClick:x,disabled:!a.trim(),className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/80 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"send"})})]})})]}):null};var o;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(o||(o={}));var m;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(m||(m={}));const _=N("Haptics",{web:()=>E(()=>import("./web-CXnrwHG6-1769119750716.js"),__vite__mapDeps([0,1,2,3,4,5])).then(t=>new t.HapticsWeb)}),h=()=>typeof window<"u"&&!!window.Android,R=t=>{var r;return h()&&((r=window.Android)!=null&&r.showToast)?(window.Android.showToast(t),!0):!1},H=async(t=50)=>{var r;try{await _.impact({style:o.Light})}catch{h()&&((r=window.Android)!=null&&r.vibrate)?window.Android.vibrate(t):navigator.vibrate&&navigator.vibrate(t)}};export{o as I,m as N,k as O,R as s,H as t};
